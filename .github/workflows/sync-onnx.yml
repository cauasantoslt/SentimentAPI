name: ðŸ”„ Sync ONNX Model

on:
  push:
    paths:
      - 'data-science/**.onnx' # SÃ³ dispara se mudar o arquivo ONNX na pasta de dados
    branches:
      - main 

jobs:
  sync-model:
    runs-on: ubuntu-latest
    permissions:
      contents: write # PermissÃ£o para o robÃ´ fazer o commit

    steps:
      # 1. Baixa todo o repositÃ³rio
      - name: ðŸ“¥ Checkout Code
        uses: actions/checkout@v4
      # 2. Copia o arquivo
      - name: ðŸ“‚ Copy ONNX to Java Resources
        run: |
          echo "Copiando modelo..."
          mkdir -p src/main/resources/
          cp data-science/sentiment_model_multilang.onnx src/main/resources/
          
          # FORÃ‡A O GIT A VER O ARQUIVO NOVO
          git add src/main/resources/sentiment_model_multilang.onnx
          
          echo "âœ… CÃ³pia e Add concluÃ­dos!"

      # 3. Faz o Commit
      - name: ðŸ’¾ Commit Changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "ðŸ¤– CI: Atualizando modelo ONNX (Auto-Sync)"
          # Removi o file_pattern para ele pegar o que estiver na Ã¡rea de stage