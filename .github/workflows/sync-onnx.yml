name: ðŸ”„ Sync ONNX Model

# Quando isso vai rodar?
on:
  push:
    paths:
      - 'data-science/**.onnx' # SÃ³ roda se mudar o arquivo ONNX
    branches:
      - main # Ou 'master', dependendo do seu repo
  workflow_dispatch: # Permite rodar manualmente clicando num botÃ£o

jobs:
  sync-model:
    runs-on: ubuntu-latest
    permissions:
      contents: write # PermissÃ£o para o robÃ´ fazer commit

    steps:
      # 1. Baixa o cÃ³digo do repositÃ³rio
      - name: ðŸ“¥ Checkout Code
        uses: actions/checkout@v4

      # 2. Copia o arquivo (AQUI VOCÃŠ PRECISA CONFERIR OS CAMINHOS)
      - name: ðŸ“‚ Copy ONNX to Java Resources
        run: |
          echo "Copiando modelo..."
          
          # Cria a pasta de destino caso nÃ£o exista (ajuste o caminho 'backend/...' se precisar)
          mkdir -p backend/src/main/resources/
          
          # Copia o arquivo (sobrescrevendo o antigo)
          cp data-science/sentiment_model_multilang.onnx backend/src/main/resources/
          
          echo "âœ… CÃ³pia concluÃ­da!"

      # 3. Faz o Commit e Push automÃ¡tico
      - name: ðŸ’¾ Commit Changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "ðŸ¤– CI: Atualizando modelo ONNX no Backend (Auto-Sync)"
          file_pattern: 'src/main/resources/*.onnx'